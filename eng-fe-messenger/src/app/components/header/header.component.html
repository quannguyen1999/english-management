<header class=" shadow-sm" sunburstBox>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16">
      <!-- Logo -->
      <div class="flex-shrink-0 flex items-center">
        <a routerLink="/chat" class="flex items-center">
          <img src="assets/logo.png" alt="Messenger Logo" class="h-10 w-auto" />
        </a>
      </div>

      <!-- Action Buttons
      <div class="flex items-center space-x-4 mr-8" >
        <button roughBox class="border-1 border-solid p-2 border-black rounded-md text-gray-600 hover:text-red-600 transition-colors" (click)="onLogout()" title="Logout">
          <mat-icon>logout</mat-icon>
        </button>
        <button class="p-2 text-gray-600 hover:text-blue-600 transition-colors" (click)="onProfile()" title="Profile">
          <mat-icon>account_circle</mat-icon>
        </button>
        <button class="p-2 text-gray-600 hover:text-green-600 transition-colors" (click)="onPendingFriend()" title="Pending Friend Requests">
          <mat-icon>person_add</mat-icon>
        </button>
        <button class="p-2 text-gray-600 hover:text-green-600 transition-colors" (click)="onChat()" title="Pending Friend Requests">
          <mat-icon>chat</mat-icon>
        </button>
      </div> -->

      <!-- Search Bar -->
      <div class="flex-1 flex items-center justify-center px-2 lg:ml-6 lg:justify-end">
        <div class="max-w-lg w-full lg:max-w-xs relative">
          <label for="search" class="sr-only">Search</label>
          <form [formGroup]="searchForm">
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <mat-icon class="h-5 w-5 text-gray-400">search</mat-icon>
              </div>
              <input id="search"
                     formControlName="searchTerm"
                     class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                     placeholder="Search friends..."
                     type="search">
            </div>
          </form>
          <div *ngIf="searchResults$ | async as results" class="absolute left-0 right-0 z-10 mt-1 w-full rounded-md shadow-lg">
            <div class="rounded-md bg-white shadow-xs">
              <div class="py-1">
                <div *ngFor="let user of results" 
                     (click)="viewProfile(user)"
                     class="flex items-center px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900 cursor-pointer">
                  <img [src]="user.avatar" 
                       alt="User avatar"
                       class="h-8 w-8 rounded-full">
                  <div class="ml-3">
                    <p class="text-sm font-medium text-gray-900">{{ user.name }}</p>
                    <p class="text-xs text-gray-500">
                      {{ user.friendStatus === FriendStatus.ACCEPTED ? 'Friend' : 
                         user.friendStatus === FriendStatus.PENDING_SENT ? 'Request Sent' :
                         user.friendStatus === FriendStatus.PENDING_RECEIVED ? 'Request Received' : 'Not Friends' }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- User Menu -->
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <div class="relative">
            <img [src]="currentUser?.avatar || 'assets/avatars/default-avatar.png'"
                 alt="User avatar"
                 class="h-8 w-8 rounded-full">
            <div class="absolute bottom-0 right-0 w-3 h-3 rounded-full bg-green-500 border-2 border-white"></div>
          </div>
        </div>
        <div class="ml-3">
          <p class="text-sm font-medium text-gray-700">{{ currentUser?.name }}</p>
        </div>
        <button (click)="onLogout()"
                class="ml-4 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
          Logout
        </button>
      </div>
    </div>
  </div>
</header> 