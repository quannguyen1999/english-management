<div *ngIf="isOpen" class="mini-chat-box bg-white text-black rounded-lg shadow-lg flex flex-col w-80 h-96" roughBox>
  <!-- Header -->
  <div class="flex items-center justify-between p-3 border-b border-gray-700  rounded-t-lg">
    <div class="flex items-center space-x-2">
      <img [src]="user.avatar" [alt]="user.username" class="w-8 h-8 rounded-full object-cover">
      <span class="font-semibold">{{ user.username }}</span>
    </div>
    <button (click)="onClose()" class="text-gray-400 hover:text-red-400">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <!-- Messages -->
  <div class="flex-1 overflow-y-auto p-3 space-y-2 ">
    <div *ngFor="let msg of messages">
      <div [ngClass]="{'text-right': msg.isMine, 'text-left': !msg.isMine}">
        <span 
              class="inline-block px-3 py-1 rounded-lg max-w-xs break-words">
          {{ msg.content }}
        </span>
      </div>
    </div>
  </div>
  <!-- Input -->
  <div class="p-2 border-t   rounded-b-lg flex items-center">
    <input type="text" [(ngModel)]="newMessage" (keyup.enter)="sendMessage()" placeholder="Aa" class="flex-1 text-black rounded-full px-3 py-1 focus:outline-none">
    <button (click)="sendMessage()" class="ml-2 text-blue-400 hover:text-blue-600">
      <mat-icon>send</mat-icon>
    </button>
  </div>
</div> 